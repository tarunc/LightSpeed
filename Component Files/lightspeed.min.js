var n=512;var w=0;var h=0;var x=0;var y=0;var z=0;var starColorRatio=0;var starRatio=256;var starSpeed=4;var starSpeedPrev=0;var star=new Array(n);var opacity=0.1;var cursorX=0;var cursorY=0;var context;var key;var timeout;var waitTime=0;var isRunning=true;function start(){resize();animate()}function resize(){if(document.documentElement){w=document.documentElement.clientWidth;h=document.documentElement.clientHeight}else{w=document.body.clientWidth;h=document.body.clientHeight}x=Math.round(w/2);y=Math.round(h/2);z=(w+h)/2;starColorRatio=1/z;cursorX=x;cursorY=y;init()}function init(){for(var a=0;a<n;a++){star[a]=new Array(5);star[a][0]=Math.random()*w*2-x*2;star[a][1]=Math.random()*h*2-y*2;star[a][2]=Math.round(Math.random()*z);star[a][3]=0;star[a][4]=0}var b=document.getElementById("space");b.style.position="absolute";b.width=w;b.height=h;context=b.getContext("2d");context.fillStyle="rgb(0,0,0)";context.strokeStyle="rgb(255,255,255)"}function animate(){var d=cursorX-x;var a=cursorY-y;context.fillRect(0,0,w,h);for(var c=0;c<n;c++){var f=true;var e=star[c][3];var b=star[c][4];star[c][0]+=d>>4;star[c][1]+=a>>4;star[c][2]-=starSpeed;if(star[c][0]>x<<1){star[c][0]-=w<<1;f=false}if(star[c][0]<-x<<1){star[c][0]+=w<<1;f=false}if(star[c][1]>y<<1){star[c][1]-=h<<1;f=false}if(star[c][1]<-y<<1){star[c][1]+=h<<1;f=false}if(star[c][2]>z){star[c][2]-=z;f=false}if(star[c][2]<0){star[c][2]+=z;f=false}star[c][3]=x+(star[c][0]/star[c][2])*starRatio;star[c][4]=y+(star[c][1]/star[c][2])*starRatio;if(e>0&&e<w&&b>0&&b<h&&f){context.lineWidth=(1-starColorRatio*star[c][2])*2;context.beginPath();context.moveTo(e,b);context.lineTo(star[c][3],star[c][4]);context.stroke();context.closePath()}}if(isRunning){timeout=setTimeout("animate()",waitTime)}}function mouseMove(a){a=a||event;cursorX=a.pageX;cursorY=a.pageY}function keyPress(a){a=a||event;key=a.which||a.keyCode;switch(key){case 112:case 80:isRunning=!isRunning;if(isRunning){timeout=setTimeout("animate()",waitTime)}else{clearTimeout(timeout)}break;case 32:starSpeedPrev=(starSpeed!=0)?starSpeed:starSpeedPrev;starSpeed=(starSpeed!=0)?0:starSpeedPrev;break;case 13:context.fillStyle="rgba(0,0,0,"+opacity+")";break}}function keyUp(){if(key==13){context.fillStyle="rgb(0,0,0)"}}function mouseWheel(a){a=a||event;var b=0;if(a.wheelDelta){b=a.wheelDelta/120}else{if(a.detail){b=-a.detail/3}}starSpeed+=(b>=0)?-0.2:0.2;if(a.preventDefault){a.preventDefault()}}document.onmousemove=mouseMove;document.onkeypress=keyPress;document.onkeyup=keyUp;document.onmousewheel=mouseWheel;if(window.addEventListener){window.addEventListener("DOMMouseScroll",mouseWheel,false)};